os: osx

language: objective-c

env:
  global:
    - secure: "bKaTqUM4ESEpEv4G3ZSTHCD0exkBDd0JvSRLGKmEPhrCEVVvl/PeVH0qbA8vvmfhp97PyHIe0S9+d+X42VctcSP9/4lvJgn0bLuMBPM/eynUNtlN5iPZpFYY5BRB1E7h7PVwGueCWV4PaNu9mHn73JCRuXjXd8UN7jv8X6JONBHioQYmM7f8Tq7ddRUbK2XnVxAfIgL/zAT4RrDbxupB0GvhFdnX/nVuys65UxnI+mCCZgTBTuvxTR/y60vPz+jVbH827ky2i7vaJu567UPDrcQ4AntPJzYfe/7usnznHs7J8enu1afYw04+w1VRLPFnrpH9++ImZYU1ksQHT/EWYJjkZaLHeCui18VGJF3BSOmGO53r8g5RBsQ4mb5LapnR1i/tJk7RmabKnfSOvlfL4Nbt7QJhVQYCYNABnDlhXzuRFhirQrG/9wDocuHIKoZX1EAMB/vrR9WUS1YTQ+QT1/3KtlC7HjNAZXPo/yd6S8CJ17039qjA86kS0f/nnLUd29W8Y7baYXYkDbsxhAZ0kuuZQdPU7aGAcGJZVuUEKY6WAbBFcjaUkdM3lv3ae6PPDTi/yJBdH5ZiNNdeI4ol0r0P96rdGFki0CTbwpAkcYe+it8WGGpIX8Lcdkvyc78VcNTVG62gVKgAiFdyAjRwNjNd55E6YIUqPQ1e437bIss="
  matrix:
    - NODE_VERSION="0.10.36"
    - NODE_VERSION="0.12.7"
    - NODE_VERSION="4.0.0"

install:
  - rm -rf ~/.nvm
  - git clone https://github.com/creationix/nvm.git ~/.nvm
  - source ~/.nvm/nvm.sh
  - nvm install $NODE_VERSION
  - node -v
  - npm -v
  - npm install

script:
  - mkdir /Users/travis/build/tmarrinan/Build
  - tar czf /Users/travis/build/tmarrinan/Build/websocketio_mac_${NODE_VERSION}.tar.gz .
  - mv /Users/travis/build/tmarrinan/Build/websocketio_mac_${NODE_VERSION}.tar.gz .
  - echo $BITBUCKET_PASSWORD
  - node bitbucket_upload.js tmarrinan $BITBUCKET_PASSWORD tmarrinan/binary-modules websocketio_mac_${NODE_VERSION}.tar.gz
  - ls -a

